<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Gain Stage</title>
</head><body><br/>
<br/>
<br/>
<img src="screenshot from 2014-03-03 234721.png" /><br/>
<br/>
Programmable gain<br/>
<br/>
AD 8221 combined AD5292 gives us a way to create a selectable gain current driver.<br/>
<br/>
The basically topology uses programmable gain 1.4-2.8x with a hardware limited 3x gain limt (in case of digital pot failure), output into 8 selectable range switches.<br/>
<br/>
All Values are at worst +-1%<br/>
On resistance of demux is at most 400 Ohm<br/>
<br/>
<br/>
1. .5uA - 1uA : Nominal:384K, 1%: 3.9K, 374kOhm &nbsp;+ 20kOhm<br/>
2. 1uA - 2 uA : Nominal:192kOhm, 182kOhm + 20kOhm<br/>
3. 2uA - 4uA : Nominal: 96kOhm, 91kOhm + 10kOhm<br/>
4. 4uA - 8uA : Nominal: 48kOhm, 45kOhm + 5kOhm<br/>
5. 8uA- 16uA : Nominal: 24kOhm, 22kOhm + 5kOhm <br/>
6. 16uA - 32uA : Nominal: 12kOhm . 10kOhm+ 5kOhm trim<br/>
7. 32uA -64uA :Nominal: 6kOhm, 5kOhm + 2kOhm Ohm trim<br/>
8. 64uA - <b>100uA </b>-128uA : Nominal: 3kOhm, &nbsp;2kOhm 2kOhm trim<br/>
<br/>
<br/>
R_0 = the bias resistor value, this sets the zero scale maximum amplification, 24.7kohm <br/>
G_MAX = Maximum gain at 0 scale, set to 3<br/>
G_D-MAX = Maximum gain at design range limits = 2.8 , Digital code with 100K 1024 division potentiometer = 28 , 2.744 kOhm<br/>
G_D-Min = Minimum gain at design range limit = 1.4, Digital code with 100k 1024 division potentiometer = 1012 , 98.8kOhm<br/>
V_0 = nominal peak voltage going into the converter, .137V -&gt; V_0*G_D-Min = .192V , .192V into 384kOhm = 0.5uA<br/>
<br/>
<br/>
R_V = Resistor for DDS output, this sets the p-p voltage V_0, <br/>
<br/>
<br/>
<br/>
<img src="current_lot.png" /><br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
</body></html>
EESchema Schematic File Version 2
LIBS:ddslib
LIBS:tDCS_driver-cache
EELAYER 24 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 7
Title "tDCS current driver"
Date "01 Feb 2014"
Rev "A"
Comp ""
Comment1 "Copyright 2014 Andrey Shmakov"
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L DGND #PWR01
U 1 1 5245DE49
P 6550 6850
F 0 "#PWR01" H 6550 6850 40  0001 C CNN
F 1 "DGND" H 6550 6780 40  0000 C CNN
F 2 "" H 6550 6850 60  0001 C CNN
F 3 "" H 6550 6850 60  0001 C CNN
	1    6550 6850
	0    -1   -1   0   
$EndComp
$Comp
L DVDD_3V3 #PWR02
U 1 1 52266045
P 4600 6000
F 0 "#PWR02" H 4600 6100 30  0001 C CNN
F 1 "DVDD_3V3" H 4600 6110 30  0000 C CNN
F 2 "" H 4600 6000 60  0001 C CNN
F 3 "" H 4600 6000 60  0001 C CNN
	1    4600 6000
	1    0    0    -1  
$EndComp
$Sheet
S 4950 5950 1250 1000
U 5217BC08
F0 "powergen" 60
F1 "power.sch" 60
F2 "A3V3" I R 6200 6100 60 
F3 "A-15V" I R 6200 6400 60 
F4 "A15V" I R 6200 6300 60 
F5 "MUXVDD" I L 4950 6350 60 
F6 "MUXVSS" I L 4950 6500 60 
F7 "D3V3" I L 4950 6100 60 
F8 "GND" I R 6200 6850 60 
$EndSheet
$Comp
L AVDD_3V3 #PWR03
U 1 1 52265F6F
P 6400 6050
F 0 "#PWR03" H 6400 6150 30  0001 C CNN
F 1 "AVDD_3V3" H 6400 6160 30  0000 C CNN
F 2 "" H 6400 6050 60  0001 C CNN
F 3 "" H 6400 6050 60  0001 C CNN
	1    6400 6050
	1    0    0    -1  
$EndComp
Text Label 3650 7150 3    60   ~ 0
MUXD4
Text Label 3750 7150 3    60   ~ 0
MUXD3
Text Label 3850 7150 3    60   ~ 0
MUXD2
Text Label 3950 7150 3    60   ~ 0
MUXD1
Text Label 4050 7150 3    60   ~ 0
MUXD0
Text Label 3050 7150 3    60   ~ 0
MUXC4
Text Label 3150 7150 3    60   ~ 0
MUXC3
Text Label 3250 7150 3    60   ~ 0
MUXC2
Text Label 3350 7150 3    60   ~ 0
MUXC1
Text Label 3450 7150 3    60   ~ 0
MUXC0
Text Label 550  1500 0    60   ~ 0
MUXD[0..4]
Text Label 550  1400 0    60   ~ 0
MUXCOM[0..2]
Text Label 550  1250 0    60   ~ 0
MUXC[0..4]
Text Label 4500 7200 1    60   ~ 0
MUXCOM1
$Comp
L AGND #PWR04
U 1 1 52265AC3
P 4600 6850
F 0 "#PWR04" H 4600 6850 40  0001 C CNN
F 1 "AGND" H 4600 6780 50  0000 C CNN
F 2 "" H 4600 6850 60  0001 C CNN
F 3 "" H 4600 6850 60  0001 C CNN
	1    4600 6850
	-1   0    0    1   
$EndComp
Text Notes 4100 7800 2    60   ~ 0
A0-4 for the input/output mux boards
$Comp
L CONN_5 P1
U 1 1 52265826
P 3250 7550
F 0 "P1" V 3200 7550 50  0000 C CNN
F 1 "CONN_5" V 3300 7550 50  0000 C CNN
F 2 "" H 3250 7550 60  0001 C CNN
F 3 "" H 3250 7550 60  0001 C CNN
	1    3250 7550
	0    1    1    0   
$EndComp
$Comp
L CONN_5 P2
U 1 1 52265825
P 3850 7550
F 0 "P2" V 3800 7550 50  0000 C CNN
F 1 "CONN_5" V 3900 7550 50  0000 C CNN
F 2 "" H 3850 7550 60  0001 C CNN
F 3 "" H 3850 7550 60  0001 C CNN
	1    3850 7550
	0    1    1    0   
$EndComp
$Comp
L CONN_6 P3
U 1 1 52265824
P 4550 7550
F 0 "P3" V 4500 7550 60  0000 C CNN
F 1 "CONN_6" V 4600 7550 60  0000 C CNN
F 2 "" H 4550 7550 60  0001 C CNN
F 3 "" H 4550 7550 60  0001 C CNN
	1    4550 7550
	0    -1   1    0   
$EndComp
Text Label 4400 7200 1    60   ~ 0
MUXCOM2
Text Label 4700 7200 1    60   ~ 0
MUXCOM0
$Comp
L AVDD #PWR05
U 1 1 5217BC9E
P 6750 6050
F 0 "#PWR05" H 6750 6150 30  0001 C CNN
F 1 "AVDD" H 6750 6160 30  0000 C CNN
F 2 "" H 6750 6050 60  0001 C CNN
F 3 "" H 6750 6050 60  0001 C CNN
	1    6750 6050
	1    0    0    -1  
$EndComp
$Comp
L AVSS #PWR06
U 1 1 5217BC95
P 6900 6050
F 0 "#PWR06" H 6900 6050 30  0001 C CNN
F 1 "AVSS" H 6900 5980 30  0000 C CNN
F 2 "" H 6900 6050 60  0001 C CNN
F 3 "" H 6900 6050 60  0001 C CNN
	1    6900 6050
	-1   0    0    1   
$EndComp
$Sheet
S 1100 1000 2150 750 
U 5217B634
F0 "LogicTranslators" 60
F1 "logic_conn.sch" 60
F2 "DDS_BUS[0..6]" I R 3250 1300 60 
F3 "CLOCK_TWI[0..1]" I R 3250 1400 60 
F4 "GAIN_BUS[0..4]" I R 3250 1200 60 
F5 "OUT_MUX[0..3]" I L 1100 1100 60 
F6 "IN_MUX[0..3]" I L 1100 1650 60 
F7 "MUXC[0..4]" I L 1100 1250 60 
F8 "MUXD[0..4]" I L 1100 1500 60 
F9 "MUXCOM[0..2]" I L 1100 1400 60 
F10 "RNG_[0..3]" U R 3250 1100 60 
$EndSheet
Text Label 1100 1100 2    60   ~ 0
OUT_MUX[0..3]
Text Label 1100 1650 2    60   ~ 0
IN_MUX[0..3]
Text Label 3250 1100 0    60   ~ 0
RNG_[0..3]
Text Label 3250 1200 0    60   ~ 0
GAIN_BUS
Text Label 3250 1300 0    60   ~ 0
DDS_BUS
Text Label 3250 1400 0    60   ~ 0
CLOCK_TWI[0..1]
$Sheet
S 4500 3250 900  950 
U 531670E3
F0 "DDS" 50
F1 "DDS.sch" 50
F2 "CLK_IN" I L 4500 4000 60 
F3 "DSS_BUS[0..6]" I L 4500 3400 60 
F4 "VOut" I R 5400 3600 60 
F5 "VOut-" I R 5400 3900 60 
$EndSheet
Wire Wire Line
	6200 3900 5400 3900
Wire Wire Line
	6200 3800 6200 3900
Wire Wire Line
	6500 3800 6200 3800
Wire Wire Line
	6200 3600 6200 3700
Wire Wire Line
	6200 3700 6500 3700
Wire Wire Line
	5400 3600 6200 3600
Wire Wire Line
	4500 4000 4200 4000
Wire Bus Line
	4100 3400 4500 3400
Wire Bus Line
	1100 1400 550  1400
Wire Wire Line
	4600 7200 4600 6850
Wire Wire Line
	4300 6300 4300 7200
Wire Wire Line
	4950 6350 4300 6350
Wire Bus Line
	4350 1200 4350 3050
Wire Bus Line
	3250 1200 4350 1200
Wire Wire Line
	6750 6300 6750 6050
Wire Wire Line
	6200 6300 6750 6300
Wire Wire Line
	6400 6100 6400 6050
Wire Wire Line
	6200 6100 6400 6100
Wire Bus Line
	4100 1300 4100 3400
Wire Bus Line
	3250 1300 4100 1300
Wire Bus Line
	3300 1400 3250 1400
Wire Bus Line
	3300 1400 3300 4700
Wire Wire Line
	6900 6400 6200 6400
Wire Wire Line
	6900 6050 6900 6400
Wire Bus Line
	800  1100 1100 1100
Wire Bus Line
	800  850  800  1100
Wire Bus Line
	850  1650 1100 1650
Wire Wire Line
	4800 6500 4800 7200
Wire Wire Line
	4950 6500 4800 6500
Wire Bus Line
	1100 1250 550  1250
Wire Bus Line
	1100 1500 550  1500
Wire Wire Line
	4600 6100 4950 6100
Wire Wire Line
	4600 6000 4600 6100
Wire Wire Line
	6200 6850 6550 6850
$Sheet
S 3350 4600 750  350 
U 5316C57F
F0 "Clock" 50
F1 "clk.sch" 50
F2 "CLK_OUT" I R 4100 4850 60 
F3 "CLK_TWI[0..1]" I L 3350 4700 60 
$EndSheet
Wire Bus Line
	3300 4700 3350 4700
Wire Wire Line
	4200 4850 4100 4850
Wire Wire Line
	4200 4000 4200 4850
$Sheet
S 6500 3450 1100 450 
U 531699F6
F0 "CurrentSource" 50
F1 "isourcesch.sch" 50
F2 "Vin+" I L 6500 3700 60 
F3 "Vin-" I L 6500 3800 60 
F4 "RNG_[0..3]" U L 6500 3500 60 
F5 "IOUT" I R 7600 3750 60 
F6 "GAIN_BUS[0..4]" I L 6500 3600 60 
$EndSheet
Wire Bus Line
	4350 3050 6250 3050
Wire Bus Line
	6250 3050 6250 3600
Wire Bus Line
	6250 3600 6500 3600
$Sheet
S 8450 3350 950  550 
U 531703E6
F0 "OutputMultiplexer" 50
F1 "mux.sch" 50
F2 "IN_MUX[0..3]" I L 8450 3450 60 
F3 "OUT_MUX[0..3]" I L 8450 3550 60 
F4 "I_IN" I L 8450 3700 60 
$EndSheet
Wire Wire Line
	8450 3700 8000 3700
Wire Wire Line
	8000 3700 8000 3750
Wire Wire Line
	8000 3750 7600 3750
Wire Bus Line
	8450 3450 8350 3450
Wire Bus Line
	8350 3450 8350 2300
Wire Bus Line
	8450 3550 8150 3550
Wire Bus Line
	8150 3550 8150 2300
Text Label 8350 2300 1    60   ~ 0
IN_MUX[0..3]
Text Label 8150 2300 1    60   ~ 0
OUT_MUX[0..3]
$Comp
L DVDD_2V5 #PWR07
U 1 1 5318760A
P 4300 6300
F 0 "#PWR07" H 4300 6400 30  0001 C CNN
F 1 "DVDD_2V5" H 4300 6410 30  0000 C CNN
F 2 "" H 4300 6300 60  0000 C CNN
F 3 "" H 4300 6300 60  0000 C CNN
	1    4300 6300
	1    0    0    -1  
$EndComp
Connection ~ 4300 6350
Wire Bus Line
	6500 3500 6500 1100
Wire Bus Line
	6500 1100 3250 1100
$EndSCHEMATC
